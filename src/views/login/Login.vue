<template>
  <div>
    <section class="section">
      <div class="container">
        <!-- 配图 -->
        <svg
          class="image"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          width="173"
          height="173"
          viewBox="0 0 173 173"
        >
          <defs>
            <clipPath id="clip-path">
              <circle
                id="椭圆_24"
                data-name="椭圆 24"
                cx="86.5"
                cy="86.5"
                r="86.5"
                transform="translate(-12633 -491)"
                fill="#fff"
                stroke="#707070"
                stroke-width="1"
              />
            </clipPath>
          </defs>
          <g
            id="蒙版组_2"
            data-name="蒙版组 2"
            transform="translate(12633 491)"
            clip-path="url(#clip-path)"
          >
            <g
              id="undraw_xmas_snowman_k7yf"
              transform="translate(-12706.194 -523.807)"
            >
              <path
                id="路径_231"
                data-name="路径 231"
                d="M181.765,139.594l.1-.387c.021-.085,2.2-8.554,8.805-13.165s15.309-3.726,15.4-3.717l.4.043-.1.387c-.021.085-2.2,8.554-8.805,13.165s-15.309,3.726-15.4,3.717Zm9.3-12.981c-5.588,3.9-7.905,10.659-8.415,12.364,1.776.109,8.927.267,14.51-3.627s7.9-10.659,8.415-12.364C203.8,122.877,196.648,122.719,191.065,126.614Z"
                transform="translate(69.708 48.805)"
                fill="#3f3d56"
              />
              <path
                id="路径_232"
                data-name="路径 232"
                d="M193.26,132.31c-3.323,7.3-11.181,10.87-11.181,10.87s-2.471-8.269.852-15.57,11.18-10.87,11.18-10.87S196.583,125.008,193.26,132.31Z"
                transform="translate(69.369 45.517)"
                fill="#222a36"
              />
              <rect
                id="矩形_218"
                data-name="矩形 218"
                width="209.767"
                height="0.589"
                transform="translate(59.512 188.048)"
                fill="#3f3d56"
              />
              <path
                id="路径_233"
                data-name="路径 233"
                d="M51.712,160.7l-.373-.14c-.082-.031-8.247-3.159-12.072-10.252s-1.952-15.634-1.933-15.72l.088-.389.373.14c.082.031,8.247,3.159,12.072,10.252s1.952,15.634,1.933,15.72ZM39.879,149.977c3.234,6,9.686,9.072,11.321,9.773.311-1.752,1.286-8.838-1.945-14.829s-9.685-9.07-11.321-9.773C37.623,136.9,36.648,143.986,39.879,149.977Z"
                transform="translate(-16.706 55.929)"
                fill="#3f3d56"
              />
              <path
                id="路径_234"
                data-name="路径 234"
                d="M46.125,144.182c6.874,4.135,9.521,12.35,9.521,12.35s-8.5,1.509-15.371-2.626-9.521-12.35-9.521-12.35S39.251,140.046,46.125,144.182Z"
                transform="translate(-20.346 60.156)"
                fill="#222a36"
              />
              <circle
                id="椭圆_25"
                data-name="椭圆 25"
                cx="89.563"
                cy="89.563"
                r="89.563"
                transform="translate(70.413 29.249)"
                fill="#3f3d56"
              />
              <path
                id="路径_235"
                data-name="路径 235"
                d="M221.166,115.829a70.413,70.413,0,1,1-70.413-70.413A70.413,70.413,0,0,1,221.166,115.829Z"
                transform="translate(9.224 2.984)"
                opacity="0.2"
              />
              <circle
                id="椭圆_26"
                data-name="椭圆 26"
                cx="6.776"
                cy="6.776"
                r="6.776"
                transform="translate(120.793 163.594)"
                fill="#d0cde1"
              />
              <circle
                id="椭圆_27"
                data-name="椭圆 27"
                cx="6.776"
                cy="6.776"
                r="6.776"
                transform="translate(127.569 165.067)"
                fill="#d0cde1"
              />
              <circle
                id="椭圆_28"
                data-name="椭圆 28"
                cx="6.776"
                cy="6.776"
                r="6.776"
                transform="translate(185.314 163.594)"
                fill="#d0cde1"
              />
              <circle
                id="椭圆_29"
                data-name="椭圆 29"
                cx="6.776"
                cy="6.776"
                r="6.776"
                transform="translate(171.761 165.067)"
                fill="#d0cde1"
              />
              <circle
                id="椭圆_30"
                data-name="椭圆 30"
                cx="10.017"
                cy="10.017"
                r="10.017"
                transform="translate(149.96 160.354)"
                fill="#d0cde1"
              />
              <circle
                id="椭圆_31"
                data-name="椭圆 31"
                cx="10.017"
                cy="10.017"
                r="10.017"
                transform="translate(139.943 163.594)"
                fill="#d0cde1"
              />
              <path
                id="路径_236"
                data-name="路径 236"
                d="M184.7,126.506a70.43,70.43,0,0,1-88.317-1.034c11.4-3.194,26.23-5.126,42.442-5.126C156.723,120.346,172.935,122.7,184.7,126.506Z"
                transform="translate(18.792 47.668)"
                fill="#d0cde1"
              />
              <circle
                id="椭圆_32"
                data-name="椭圆 32"
                cx="22.096"
                cy="22.096"
                r="22.096"
                transform="translate(137.88 74.62)"
                fill="#d0cde1"
              />
              <circle
                id="椭圆_33"
                data-name="椭圆 33"
                cx="30.345"
                cy="30.345"
                r="30.345"
                transform="translate(129.631 112.626)"
                fill="#d0cde1"
              />
              <circle
                id="椭圆_34"
                data-name="椭圆 34"
                cx="1.496"
                cy="1.496"
                r="1.496"
                transform="translate(191.16 80.841)"
                fill="#d0cde1"
              />
              <circle
                id="椭圆_35"
                data-name="椭圆 35"
                cx="1.496"
                cy="1.496"
                r="1.496"
                transform="translate(108.962 99.696)"
                fill="#d0cde1"
              />
              <circle
                id="椭圆_36"
                data-name="椭圆 36"
                cx="1.496"
                cy="1.496"
                r="1.496"
                transform="translate(212.666 103.231)"
                fill="#d0cde1"
              />
              <circle
                id="椭圆_37"
                data-name="椭圆 37"
                cx="2.029"
                cy="2.029"
                r="2.029"
                transform="translate(127.579 69.113)"
                fill="#d0cde1"
              />
              <circle
                id="椭圆_38"
                data-name="椭圆 38"
                cx="2.029"
                cy="2.029"
                r="2.029"
                transform="translate(166.174 60.275)"
                fill="#d0cde1"
              />
              <circle
                id="椭圆_39"
                data-name="椭圆 39"
                cx="2.029"
                cy="2.029"
                r="2.029"
                transform="translate(104.894 130.099)"
                fill="#d0cde1"
              />
              <circle
                id="椭圆_40"
                data-name="椭圆 40"
                cx="2.029"
                cy="2.029"
                r="2.029"
                transform="translate(198.877 130.099)"
                fill="#d0cde1"
              />
              <path
                id="路径_237"
                data-name="路径 237"
                d="M150.214,86.018H113.656a1.018,1.018,0,0,0-1.018,1.018v2.088a1.018,1.018,0,0,0,1.018,1.018h6.213l.643.614-5.625,28.206,3.643,4.767,5.738-29.386,18.126,17.307,5.3-.884-21.52-20.623h24.037a1.018,1.018,0,0,0,1.018-1.018V87.036A1.018,1.018,0,0,0,150.214,86.018Z"
                transform="translate(28.484 27.197)"
                fill="#222a36"
              />
              <path
                id="路径_238"
                data-name="路径 238"
                d="M118.97,74.369s9.467-4.733,9.467-6.424-3.719-6.762-10.481-6.762c0,0-1.69-3.043-3.719-.676s1.014,4.057,1.014,4.057-3.719,6.086,1.69,9.8Z"
                transform="translate(29.022 11.446)"
                fill="#222a36"
              />
              <circle
                id="椭圆_41"
                data-name="椭圆 41"
                cx="1.768"
                cy="1.768"
                r="1.768"
                transform="translate(149.96 90.529)"
                fill="#3f3d56"
              />
              <circle
                id="椭圆_42"
                data-name="椭圆 42"
                cx="1.768"
                cy="1.768"
                r="1.768"
                transform="translate(166.458 90.529)"
                fill="#3f3d56"
              />
              <rect
                id="矩形_219"
                data-name="矩形 219"
                width="3.241"
                height="10.017"
                transform="translate(158.356 96.127)"
                fill="#ff6584"
              />
              <circle
                id="椭圆_43"
                data-name="椭圆 43"
                cx="1.768"
                cy="1.768"
                r="1.768"
                transform="translate(158.798 130.303)"
                fill="#3f3d56"
              />
              <circle
                id="椭圆_44"
                data-name="椭圆 44"
                cx="1.768"
                cy="1.768"
                r="1.768"
                transform="translate(158.798 136.784)"
                fill="#3f3d56"
              />
              <circle
                id="椭圆_45"
                data-name="椭圆 45"
                cx="1.768"
                cy="1.768"
                r="1.768"
                transform="translate(158.798 143.266)"
                fill="#3f3d56"
              />
              <rect
                id="矩形_220"
                data-name="矩形 220"
                width="35.943"
                height="12.963"
                rx="1.599"
                transform="translate(142.594 22.768)"
                fill="#3f3d56"
              />
              <path
                id="路径_239"
                data-name="路径 239"
                d="M129.952,49.593a14.731,14.731,0,1,1,14.731-14.731,14.731,14.731,0,0,1-14.731,14.731Zm0-26.515a11.785,11.785,0,1,0,11.785,11.785,11.785,11.785,0,0,0-11.785-11.785Z"
                transform="translate(30.025 -12.094)"
                fill="#3f3d56"
              />
              <path
                id="路径_240"
                data-name="路径 240"
                d="M127.583,84.926a17.6,17.6,0,0,1-8.389-2.242l.279-.519a16.254,16.254,0,0,0,16.22,0l.279.519A17.6,17.6,0,0,1,127.583,84.926Z"
                transform="translate(32.394 24.899)"
                fill="#3f3d56"
              />
              <circle
                id="椭圆_46"
                data-name="椭圆 46"
                cx="1.473"
                cy="1.473"
                r="1.473"
                transform="translate(171.467 96.127)"
                fill="#ff6584"
              />
              <circle
                id="椭圆_47"
                data-name="椭圆 47"
                cx="1.473"
                cy="1.473"
                r="1.473"
                transform="translate(145.54 96.127)"
                fill="#ff6584"
              />
              <rect
                id="矩形_221"
                data-name="矩形 221"
                width="209.767"
                height="0.589"
                transform="translate(0 216.036)"
                fill="#3f3d56"
              />
              <path
                id="路径_241"
                data-name="路径 241"
                d="M149.86,16.82V30.352a1.721,1.721,0,0,1-1.9,1.712l-18.5-2.195-4.634-.548v-11.2l4.59-.6,18.528-2.419a1.724,1.724,0,0,1,1.924,1.712Z"
                transform="translate(35.748 -15.097)"
                fill="#222a36"
              />
              <path
                id="路径_242"
                data-name="路径 242"
                d="M133.545,18.125v11.2l-4.64.542-18.794,2.2a1.721,1.721,0,0,1-1.9-1.712V16.82a1.724,1.724,0,0,1,1.924-1.712l18.814,2.425Z"
                transform="translate(25.843 -15.097)"
                fill="#222a36"
              />
              <path
                id="路径_243"
                data-name="路径 243"
                d="M129.826,17.727V27.9a1.665,1.665,0,0,1-.374,1.058l-4.634-.548v-11.2l4.59-.6a1.654,1.654,0,0,1,.418,1.108Z"
                transform="translate(35.748 -14.189)"
                opacity="0.2"
              />
              <path
                id="路径_244"
                data-name="路径 244"
                d="M125.951,17.215v11.2l-4.64.542a1.66,1.66,0,0,1-.368-1.052V17.725a1.667,1.667,0,0,1,.41-1.1Z"
                transform="translate(33.437 -14.186)"
                opacity="0.2"
              />
              <rect
                id="矩形_222"
                data-name="矩形 222"
                width="10.017"
                height="13.552"
                rx="1.057"
                transform="translate(154.968 1.85)"
                fill="#222a36"
              />
            </g>
          </g>
        </svg>

        <h1 class="h-1">欢迎来到「时间壁垒」</h1>

        <h2 class="h-2">
          我们将与您一起制定目标、培养能力、完成计划，
          并通过美丽的图表追溯这一切
        </h2>

        <!-- 输入手机号 -->
        <div class="input-container" style="margin-top:7.20vh">
          <img
            class="phone-icon"
            src="https://timebarrier.file.hearfresh.cn/e8f487338fb1ef0c615a.svg"
            alt="cellphone_icon"
          />

          <input
            class="input"
            type="text"
            placeholder="请输入手机号"
            v-model="input_phoneNumber"
          />
        </div>

        <!-- 请输入验证码 -->
        <div class="input-container" style="margin-top:2.10vh">
          <img
            class="lock-icon"
            src="https://timebarrier.file.hearfresh.cn/f71aa6ac3d5b98e6c9da.svg"
            alt="lock_icon"
          />

          <input
            class="input"
            type="text"
            placeholder="请输入验证码"
            style="margin-left:3.73vw"
            v-model="input_verificationCode"
          />

          <div class="placeholder"></div>

          <div class="send" @click="click_sendVerificationCodeButton">
            {{ interval ? "重新发送(" + countDown + ")" : "发送验证码" }}
          </div>
        </div>

        <!-- 登录或注册按钮 -->
        <div class="button" @click="click_loginButton">注册或登录</div>

        <!-- 邮箱登录或注册 -->
        <div class="email-button">使用邮箱注册或登录</div>
      </div>
    </section>
  </div>
</template>

<script lang="ts">
import { ref, defineComponent, Ref, inject } from "@vue/composition-api";
import { LoginPage } from "../../lib/vue-viewmodels";
import Store from "@/store";

export default defineComponent({
  setup(props, context) {
    // 倒计时器 instance
    const interval: Ref<NodeJS.Timeout | null> = ref(null);
    // 倒计时表盘值
    const countDown: Ref<number> = ref(30);
    // 用户输入：手机号
    const input_phoneNumber: Ref<string> = ref("");
    // 用户输入：验证码
    const input_verificationCode: Ref<string> = ref("");
    // 是否登录成功
    const isLoginSuccess: Ref<boolean> = inject(
      Store.isLoginSuccess,
      ref(false)
    );

    // 点击事件：发送验证码
    const click_sendVerificationCodeButton = () => {
      LoginPage.sendVerificationCode(
        context.root,
        interval,
        countDown,
        input_phoneNumber.value
      );
    };
    // 点击事件：登录
    const click_loginButton = () => {
      LoginPage.login(
        context.root,
        input_phoneNumber.value,
        input_verificationCode.value,
        "plan",
        isLoginSuccess
      );
    };
    return {
      input_phoneNumber,
      input_verificationCode,
      click_sendVerificationCodeButton,
      click_loginButton,
      interval,
      countDown
    };
  }
});
</script>

<style lang="stylus" scoped>
.section {
  display flex
  flex-direction column
  align-items center
  justify-content center
  min-height 100vh
  width 100%
}

.container {
  max-width 90vw
  display flex
  flex-direction column
  align-items center
}

.image {
  width 12.97vh
  height 12.97vh
}

.h-1 {
  margin-top 2.17vh
  margin-bottom 1.2vh
  line-height 4.35vh
  font-size 3vh
  font-weight bold
  color #222A36
}

.h-2 {
  max-width 86.67vw
  line-height 3.15vh
  font-size 2.17vh
  color #C1C3C6
  font-weight normal
  text-align center
}

.input-container {
  display flex
  flex-direction row
  align-items center
  width 89.6vw
  height 7.05vh
  background #F4F4F8
  border-radius 0.82vh
}

.phone-icon {
  width 2.8vw
  height 2.25vh
  margin-left 4.13vw
  opacity 0.3
}

.lock-icon {
  margin-left 4.13vw
  width 3.33vw
  height 2.17vh
  opacity 0.3
}

.input {
  margin-left 4vw
  background none
  outline none
  border none
  font-size 2.25vh
  font-weight 400
  color #222A36
  opacity 1
  flex auto

  &:focus {
    border none
  }

  &::-webkit-input-placeholder {
    font-size 2.25vh
    font-weight 400
    color rgba(149, 149, 149, 1)
    opacity 0.3
  }
}

.placeholder {
  width 1px
  height 3.3vh
  background #959595
  opacity 0.3
}

.send {
  cursor pointer
  flex auto
  height 100%
  display flex
  justify-content center
  align-items center
  font-size 2.25vh
  font-weight 400
  color rgba(149, 149, 149, 1)
  opacity 0.3
}

.button {
  cursor pointer
  margin-top 7.2vh
  width 89.6vw
  height 8.77vh
  background #222A36
  opacity 1
  border-radius 0.82vh
  display flex
  justify-content center
  align-items center
  font-size 2.32vh
  line-height 3.37vh
  font-weight bold
  color rgba(255, 255, 255, 1)
  opacity 1
}

.email-button {
  cursor pointer
  margin-top 5.17vh
  line-height 2.92vh
  font-size 2.02vh
  font-weight normal
  color #99A8B8
}
</style>
